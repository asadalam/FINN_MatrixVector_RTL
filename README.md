# Matrix Vector Activation Unit 

Repository for the RTL implementation of matrix-vector activation unit in collaboration with Xilinx research labs in Dublin, Ireland.

The repository is organized as follows:
### Document Folder (Doc):
  - This folder contains documentation related to the project
  - To fetch GitHub pages which hosts the automatic documentation generated by Natural Docs, run
  ```
  git clone https://github.com/asadalam/Xilinx_mvau.git -b gh-pages
  ```
### Project Folder (proj):
Project folder, contains the following sub-folders
  - Source Folder (src): All source code
  - Simulation Folder (sim): Files related to simulation like test benches
  - Synthesis Folder (syn) - Files related to synthesis
  - FINN HLS Library Folder (finn-hlslib) - Forked repository of Xilinx HLS Library added as a submodule
  - IP Repository Folder (ip_repo) - Folder to keep all files related to IP
  - Regression Test Folder (RegressionTests) - Files to run automated regression test including functional simulation and synthesis of RTL and HLS along with data gathering

## Environmental Variables
In order to run simulation and synthesis, set the following two environmental variables
  - FINN_HLS_ROOT: Xilinx_mvau/proj/finn-hlslib
  - MVAU_RTL_ROOT: Xilinx_mvau

## Cloning the Repo and Adding FINN HLSLIB as Sub-Module
To clone the repository, say:
```
git clone https://github.com/asadalam/Xilinx_mvau.git
```

The Xilinx FINN HLS library has been forked separately and added as a sub-module to this repository. When the repo is cloned, the FINN repository is empty. To populate it say:
```
git submodule update --init
```
to populate Xilinx_mvau/proj/finn-hlslib directory

## Hardware Design Rebuit
In order to rebuild the hardware designs and compare outputs of RTL and HLS designs, the repo should be cloned to a machine with Vivado Design Suite installed (tested with 2020.1). Follow the following steps:
1. Clone the repository: `git clone https://github.com/asadalam/Xilinx_mvau.git`
2. Populate the FINN HLS library folder (as it is a submodule): `git submodule update --init'
3. Set the environment variables: FINN_HLS_ROOT and MVAU_RTL_ROOT
4. Move to `MVAU_RTL_ROOT/proj/RegresssionTests`
5. For testing the MVAU batch unit, open the file `regtest_mvau.py`
6. Define the following parameters in 

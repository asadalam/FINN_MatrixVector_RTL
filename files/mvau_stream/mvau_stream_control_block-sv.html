<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>mvau_stream_control_block.sv</title><link rel="stylesheet" type="text/css" href="../../styles/main.css" /><script type="text/javascript" src="../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.1 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Testbench"></a><a name="Topic182"></a><div class="CTopic TGroup LSystemVerilog first">
 <div class="CTitle">Testbench</div>
</div>

<a name="MVAU_Streaming_Block_Control_Unit"></a><a name="Topic183"></a><div class="CTopic TTestbench LSystemVerilog">
 <div class="CTitle"><span class="Qualifier">MVAU Streaming Block Control Unit (mvau_stream_control_block.</span>&#8203;sv)</div>
 <div class="CBody"><p>Author(s): Syed Asad Alam <a href="#" onclick="javascript:location.href='ma\u0069'+'lto\u003a'+'syed\u002eas'+'ad\u002ealam'+'\u0040'+'tcd'+'\u002eie';return false;">syed&#46;as<span style="display: none">[xxx]</span>ad&#46;alam<span>&#64;</span>tcd<span style="display: none">[xxx]</span>&#46;ie</a></p><p>This file lists an RTL implementation of the control block It is used to control the input buffer and generation of the correct control signals to control the multiplication operation and generate address, write and read enable for the input buffer. It also contains free running counters to track as each input activation vector is processed</p><p>It is part of the Xilinx FINN open source framework for implementing quantized neural networks on FPGAs</p><p>This material is based upon work supported, in part, by Science Foundation Ireland, www.sfi.ie under Grant No. 13/RC/2094 and, in part, by the European Union's Horizon 2020 research and innovation programme under the Marie Sklodowska-Curie grant agreement Grant No.754489.</p><div class="CHeading">Inputs</div><table class="CDefinitionList"><tr><td class="CDLEntry">rst_n</td><td class="CDLDefinition"><p>Active low synchronous reset</p></td></tr><tr><td class="CDLEntry">clk</td><td class="CDLDefinition"><p>Main clock</p></td></tr><tr><td class="CDLEntry">in_v</td><td class="CDLDefinition"><p>Input activation stream valid</p></td></tr></table><div class="CHeading">Outputs</div><table class="CDefinitionList"><tr><td class="CDLEntry">ib_wen</td><td class="CDLDefinition"><p>Write enable for the input buffer</p></td></tr><tr><td class="CDLEntry">ib_red</td><td class="CDLDefinition"><p>Read enable for the input buffer</p></td></tr><tr><td class="CDLEntry">sf_clr</td><td class="CDLDefinition"><p>Control signal for resetting the accumulator and a one bit control signal to indicate when sf_cnt == SF-1</p></td></tr><tr><td class="CDLEntry">do_mvau_stream</td><td class="CDLDefinition"><p>Controls how long the MVAU operation continues Case 1: NF=1 =&gt; do_mvau_stream = in_v (input buffer not reused) Case 2: NF&gt;1 =&gt; do_mvau_stream = in_v | (~(nf_clr&amp;sf_clr)) (input buffer reused)</p></td></tr><tr><td class="CDLEntry">[SF_T:0] sf_cnt</td><td class="CDLDefinition"><p>Address for the input buffer</p></td></tr></table><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">SF=MatrixW/SIMD</td><td class="CDLDefinition"><p>Number of vertical weight matrix chunks and depth of the input buffer</p></td></tr><tr><td class="CDLEntry">NF=MatrixH/PE</td><td class="CDLDefinition"><p>Number of horizontal weight matrix chunks</p></td></tr><tr><td class="CDLEntry">SF_T</td><td class="CDLDefinition"><p>log_2(SF), determines the number of address bits for the input buffer * SF_T</p></td></tr></table></div>
</div>

<a name="Parameters"></a><a name="Topic184"></a><div class="CTopic TGroup LSystemVerilog">
 <div class="CTitle">Parameters</div>
</div>

<a name="NF_T"></a><a name="Topic185"></a><div class="CTopic TParameter LSystemVerilog">
 <div class="CTitle">NF_T</div>
 <div class="CBody"><p>Word length of the NF counter to control reading and writing from the input buffer</p></div>
</div>

<a name="Signals"></a><a name="Topic186"></a><div class="CTopic TGroup LSystemVerilog">
 <div class="CTitle">Signals</div>
</div>

<a name="nf_clr"></a><a name="Topic187"></a><div class="CTopic TSignal LSystemVerilog">
 <div class="CTitle">nf_clr</div>
 <div class="CBody"><p>Signal to reset the nf_cnt counter Only used when multiple output channel</p></div>
</div>

<a name="nf_cnt"></a><a name="Topic188"></a><div class="CTopic TSignal LSystemVerilog">
 <div class="CTitle">nf_cnt</div>
 <div class="CBody"><p>A counter to keep track how many weight channels have been processed Only used when multiple output channels</p></div>
</div>

<a name="Sequential_Always_Blocks"></a><a name="Topic189"></a><div class="CTopic TGroup LSystemVerilog">
 <div class="CTitle">Sequential Always Blocks</div>
</div>

<a name="NF_CLR"></a><a name="Topic190"></a><div class="CTopic TAlwaysFF LSystemVerilog">
 <div class="CTitle">NF_CLR</div>
 <div class="CBody"><p>A one bit control signal to indicate when nf_cnt == NF</p></div>
</div>

<a name="NF_CNT"></a><a name="Topic191"></a><div class="CTopic TAlwaysFF LSystemVerilog">
 <div class="CTitle">NF_CNT</div>
 <div class="CBody"><p>A counter to keep track when we are done writing to the input buffer so that it can be reused again Similar to the variable nf in mvau.hpp Only used when multiple output channels</p></div>
</div>

<a name="SF_CLR"></a><a name="Topic192"></a><div class="CTopic TAlwaysFF LSystemVerilog">
 <div class="CTitle">SF_CLR</div>
 <div class="CBody"><p>A one bit control signal to indicate when sf_cnt == SF-1</p></div>
</div>

<a name="SF_CNT"></a><a name="Topic193"></a><div class="CTopic TAlwaysFF LSystemVerilog last">
 <div class="CTitle">SF_CNT</div>
 <div class="CBody"><p>A sequential 'always' block for a counter which keeps track when the input buffer is full.&nbsp; Only runs when do_mvau_stream is asserted A counter similar to sf in mvau.hpp</p></div>
</div>

</body></html>